{"version":3,"sources":["components/Downloads/DownloadListItem.js","components/Downloads/Downloads.js"],"names":["useStyles","makeStyles","theme","inline","display","DownloadListItem","props","classes","react_default","a","createElement","ListItem","button","alignItems","Fragment","ListItemAvatar","onClick","Avatar","alt","title","src","thumbnail","ListItemText","className","primary","secondary","Typography","component","variant","concat","color","channelTitle","tags","length","map","value","index","Chip","key","label","IconButton","onMouseLeave","MoreVert","defaultProps","pure","root","width","maxWidth","backgroundColor","palette","background","paper","Downloads","_React$useState","React","useState","_React$useState2","Object","slicedToArray","HistoryItems","setHistoryItems","dialog","useDialog","abortController","AbortController","_deleteDownload","asyncToGenerator","regenerator_default","mark","_callee","data","config","wrap","_context","prev","next","message","confirm","then","deleteDownloadedSong","id","createList","catch","e","stop","apply","this","arguments","getAllDownloadedSongs","listItems","v","i","URL","createObjectURL","Downloads_DownloadListItem","_x","deleteDownload","videoID","videoElement","videoId","getSongFromStorage","snippet","thumbnails","high","url","appState","uri","blob","video","list","items","PlaySong","listItemsWithDividers","forEach","item","push","undefined","Divider","Math","random","useEffect","abort","Container","fixed","Grow","in","List"],"mappings":"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","file":"static/js/28.84abf6ac.chunk.js","sourcesContent":["import React from \"react\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport Typography from \"@material-ui/core/Typography\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport Chip from \"@material-ui/core/Chip\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport {MoreVert} from \"@material-ui/icons\";\nimport PropTypes from \"prop-types\";\nimport {pure} from \"recompose\";\n// eslint-disable-next-line no-unused-vars\nconst useStyles = makeStyles((theme) => ({\n    inline: {\n        display: \"inline\",\n    },\n}));\nconst DownloadListItem = (props) => {\n\n    const classes = useStyles();\n\treturn (<ListItem button alignItems=\"flex-start\">\n\t\t\t<React.Fragment>\n\t\t\t\t<ListItemAvatar onClick={props.onClick}>\n\t\t\t\t\t<Avatar alt={props.title} src={props.thumbnail}/>\n\t\t\t\t</ListItemAvatar>\n\t\t\t\t<ListItemText\n\t\t\t\t\tclassName={\"text-truncate\"}\n\t\t\t\t\tprimary={props.title}\n\t\t\t\t\tonClick={props.onClick}\n\t\t\t\t\tsecondary={\n\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\t\tcomponent=\"span\"\n\t\t\t\t\t\t\t\tvariant=\"body2\"\n\t\t\t\t\t\t\t\tclassName={`${classes.inline} text-truncate`}\n\t\t\t\t\t\t\t\tcolor=\"textPrimary\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div className={\"text-truncate\"}>{props.channelTitle}</div>\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tprops.tags.length ? <div className={\"cardSlider Slider\"}>\n\t\t\t\t\t\t\t\t\t{props.tags.map((value, index) => <Chip className={\"mx-1\"} key={index}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={value}/>)}\n\t\t\t\t\t\t\t\t</div> : null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</React.Fragment>\n                    }\n                />\n            </React.Fragment>\n            <IconButton onClick={props.onMouseLeave}>\n                <MoreVert/>\n            </IconButton>\n        </ListItem>\n    );\n};\n\nDownloadListItem.propTypes = {\n    onMouseLeave: PropTypes.func,\n    onClick: PropTypes.func,\n    channelTitle: PropTypes.string,\n    tags: PropTypes.array,\n    title: PropTypes.string,\n    thumbnail: PropTypes.string\n};\n\nDownloadListItem.defaultProps = {};\n\nexport default pure(DownloadListItem);\n","import React, {useEffect} from \"react\";\nimport \"./Downloads.css\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport List from \"@material-ui/core/List\";\nimport Divider from \"@material-ui/core/Divider\";\nimport {deleteDownloadedSong, getAllDownloadedSongs, getSongFromStorage} from \"../../functions/songs\";\nimport DownloadListItem from \"./DownloadListItem\";\nimport Container from \"@material-ui/core/Container\";\nimport {Avatar} from \"@material-ui/core\";\nimport {useDialog} from \"muibox\";\nimport PropTypes from \"prop-types\";\nimport Grow from \"@material-ui/core/Grow\";\nimport {pure} from \"recompose\";\n\nconst useStyles = makeStyles((theme) => ({\n\troot: {\n\t\twidth: \"100%\",\n\t\tmaxWidth: \"100%\",\n\t\tbackgroundColor: theme.palette.background.paper,\n\t},\n\tinline: {\n\t\tdisplay: \"inline\",\n\t},\n}));\n\n\nconst Downloads = (props) => {\n\tconst classes = useStyles();\n\tconst [HistoryItems, setHistoryItems] = React.useState(<></>);\n\tconst dialog = useDialog();\n\tconst abortController = new AbortController();\n\n\tfunction PlaySong(data, index) {\n\t\tlet videoID = \"\";\n\t\tif (typeof data.videoElement.id === \"object\") videoID = data.videoElement.id.videoId;\n\t\tif (typeof data.videoElement.id === \"string\") videoID = data.videoElement.id;\n\t\tgetSongFromStorage(videoID).then(value => {\n\t\t\tif (value) {\n\t\t\t\t//Avoid the Promise Error\n\t\t\t\tdata.videoElement.snippet.thumbnails.high.url = URL.createObjectURL(value.thumbnail);\n\t\t\t\t/*downloadsToPlaylist().then(playList => {\n\t\t\t\t\tprops.appState({\n\t\t\t\t\t\turi: URL.createObjectURL(value.blob),\n\t\t\t\t\t\tthumbnail: URL.createObjectURL(value.thumbnail),\n\t\t\t\t\t\tvideo: data.videoElement,\n\t\t\t\t\t\tlist: playList,\n\t\t\t\t\t\tindex: index\n\t\t\t\t\t}, false);\n\t\t\t\t})\n\t\t\t\t */\n\t\t\t\tprops.appState({\n\t\t\t\t\turi: URL.createObjectURL(value.blob),\n\t\t\t\t\tthumbnail: URL.createObjectURL(value.thumbnail),\n\t\t\t\t\tvideo: data.videoElement,\n\t\t\t\t\tlist: {items: [data.videoElement]},\n\t\t\t\t\tindex: index\n\t\t\t\t}, false);\n\t\t\t}\n\t\t});\n\t}\n\n\tasync function deleteDownload(data) {\n\t\tconst config = {\n\t\t\ttitle: (\n\t\t\t\t<div className={\"k-dialog-body-title text-truncate\"}>Delete From Downloads</div>) || \"Nothing Here!\",\n\t\t\tmessage: (<div className={\"k-dialog-body-inner\"}>\n\t\t\t\t<div className={\"d-flex justify-content-center mb-3\"}>\n\t\t\t\t\t<Avatar src={data.thumbnail} alt={\"Song Thumbnail\"}/>\n\t\t\t\t</div>\n\t\t\t\tDo You want to delete {data.title} from downloads?\n\t\t\t\t<br/>\n\t\t\t</div>) || \"Nothing Here!\",\n\t\t};\n\t\tdialog.confirm(config)\n\t\t\t.then(() => {\n\t\t\t\tdeleteDownloadedSong(data.id).then(() => {\n\t\t\t\t\tcreateList();\n\t\t\t\t\t// enqueueSnackbar('Deleted From Downloads');\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((e) => e);\n\t}\n\n\tfunction createList() {\n\t\tgetAllDownloadedSongs().then(value => {\n\t\t\tsetHistoryItems(() => {\n\t\t\t\tconst listItems = value.map((v, i) => {\n\t\t\t\t\tconst thumbnail = URL.createObjectURL(v.thumbnail);\n\t\t\t\t\t// const songURL = URL.createObjectURL(v.blob);\n\t\t\t\t\treturn <DownloadListItem onMouseLeave={\n\t\t\t\t\t\t() => deleteDownload({id: v.id, thumbnail: thumbnail, title: v.title})\n\t\t\t\t\t} onClick={() => PlaySong(v, i)} className={\"text-truncate\"} key={i} title={v.title}\n\t\t\t\t\t\t\t\t\t\t\t channelTitle={v.channelTitle}\n\t\t\t\t\t\t\t\t\t\t\t thumbnail={thumbnail} tags={v.tags}/>;\n\t\t\t\t});\n\t\t\t\tconst listItemsWithDividers = [];\n\t\t\t\tlistItems.forEach((item, index) => {\n\t\t\t\t\tlistItemsWithDividers.push(item);\n\t\t\t\t\tif (listItems[index + 1] !== undefined) {\n\t\t\t\t\t\tlistItemsWithDividers.push(<Divider key={Math.random()} variant=\"inset\" component=\"li\"/>);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn listItemsWithDividers;\n\t\t\t});\n\t\t});\n\t}\n\n\tuseEffect(() => {\n\t\tcreateList();\n\t\treturn () => {\n\t\t\tabortController.abort();\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<div className={\"KabeersDownloadContainer mb-5\"} color={\"primary.dark\"}>\n\t\t\t<Container fixed>\n\t\t\t\t<Grow in={true}>\n\t\t\t\t\t<List className={`${classes.root} mt-5 bg-transparent`}>\n\t\t\t\t\t\t{HistoryItems}\n\t\t\t\t\t</List>\n\t\t\t\t</Grow>\n\t\t\t</Container>\n\t\t</div>\n\t);\n};\n\nDownloads.propTypes = {\n\tappState: PropTypes.object\n};\n\nDownloads.defaultProps = {};\n\nexport default pure(Downloads);\n"],"sourceRoot":""}