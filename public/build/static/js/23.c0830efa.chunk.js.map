{"version":3,"sources":["components/Downloads/DownloadListItem.js","components/Downloads/Downloads.js"],"names":["useStyles","makeStyles","theme","inline","display","DownloadListItem","props","classes","react_default","a","createElement","ListItem","alignItems","Fragment","ListItemAvatar","onClick","Avatar","alt","title","src","thumbnail","ListItemText","className","primary","secondary","Typography","component","variant","concat","color","channelTitle","tags","map","value","index","Chip","key","label","IconButton","onMouseLeave","MoreVert","defaultProps","root","width","maxWidth","backgroundColor","palette","background","paper","Downloads","_React$useState","React","useState","_React$useState2","Object","slicedToArray","HistoryItems","setHistoryItems","dialog","useDialog","abortController","AbortController","_deleteDownload","asyncToGenerator","regenerator_default","mark","_callee","data","config","wrap","_context","prev","next","message","confirm","then","deleteDownloadedSong","id","createList","catch","e","stop","apply","this","arguments","getAllDownloadedSongs","listItems","v","i","URL","createObjectURL","Downloads_DownloadListItem","_x","deleteDownload","videoID","videoElement","videoId","getSongFromStorage","snippet","thumbnails","high","url","appState","uri","blob","video","list","items","PlaySong","listItemsWithDividers","forEach","item","push","undefined","Divider","Math","random","useEffect","abort","Container","fixed","List"],"mappings":"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","file":"static/js/23.c0830efa.chunk.js","sourcesContent":["import React from \"react\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport Typography from \"@material-ui/core/Typography\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport Chip from \"@material-ui/core/Chip\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport {MoreVert} from \"@material-ui/icons\";\nimport PropTypes from \"prop-types\";\n\n// eslint-disable-next-line no-unused-vars\nconst useStyles = makeStyles((theme) => ({\n    inline: {\n        display: \"inline\",\n    },\n}));\nconst DownloadListItem = (props) => {\n\n    const classes = useStyles();\n    return (<ListItem alignItems=\"flex-start\">\n            <React.Fragment>\n\t\t\t\t<ListItemAvatar onClick={props.onClick}>\n\t\t\t\t\t<Avatar alt={props.title} src={props.thumbnail}/>\n\t\t\t\t</ListItemAvatar>\n\t\t\t\t<ListItemText\n\t\t\t\t\tclassName={\"text-truncate\"}\n\t\t\t\t\tprimary={props.title}\n\t\t\t\t\tonClick={props.onClick}\n\t\t\t\t\tsecondary={\n\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t<Typography\n                                component=\"span\"\n                                variant=\"body2\"\n                                className={`${classes.inline} text-truncate`}\n                                color=\"textPrimary\"\n                            >\n                                <div className={\"text-truncate\"}>{props.channelTitle}</div>\n                            </Typography>\n                            <div className={\"cardSlider Slider\"}>\n                                {props.tags.map((value, index) => {\n                                    return <Chip className={\"mx-1\"} key={index} label={value}/>;\n                                })}\n                            </div>\n                        </React.Fragment>\n                    }\n                />\n            </React.Fragment>\n            <IconButton onClick={props.onMouseLeave}>\n                <MoreVert/>\n            </IconButton>\n        </ListItem>\n    );\n};\n\nDownloadListItem.propTypes = {\n    onMouseLeave: PropTypes.func,\n    onClick: PropTypes.func,\n    channelTitle: PropTypes.string,\n    tags: PropTypes.array,\n    title: PropTypes.string,\n    thumbnail: PropTypes.string\n};\n\nDownloadListItem.defaultProps = {};\n\nexport default DownloadListItem;\n","import React, {useEffect} from \"react\";\nimport \"./Downloads.css\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport List from \"@material-ui/core/List\";\nimport Divider from \"@material-ui/core/Divider\";\nimport {deleteDownloadedSong, getAllDownloadedSongs, getSongFromStorage} from \"../../functions/songs\";\nimport DownloadListItem from \"./DownloadListItem\";\nimport Container from \"@material-ui/core/Container\";\nimport {Avatar} from \"@material-ui/core\";\nimport {useDialog} from \"muibox\";\nimport PropTypes from \"prop-types\";\n\nconst useStyles = makeStyles((theme) => ({\n\troot: {\n\t\twidth: \"100%\",\n\t\tmaxWidth: \"100%\",\n\t\tbackgroundColor: theme.palette.background.paper,\n\t},\n\tinline: {\n\t\tdisplay: \"inline\",\n\t},\n}));\n\n\nconst Downloads = (props) => {\n\tconst classes = useStyles();\n\tconst [HistoryItems, setHistoryItems] = React.useState(<></>);\n\tconst dialog = useDialog();\n\tconst abortController = new AbortController();\n\n\tfunction PlaySong(data, index) {\n\t\tlet videoID = \"\";\n\t\tif (typeof data.videoElement.id === \"object\") videoID = data.videoElement.id.videoId;\n\t\tif (typeof data.videoElement.id === \"string\") videoID = data.videoElement.id;\n\t\tgetSongFromStorage(videoID).then(value => {\n\t\t\tif (value) {\n\t\t\t\t//Avoid the Promise Error\n\t\t\t\tdata.videoElement.snippet.thumbnails.high.url = URL.createObjectURL(value.thumbnail);\n\t\t\t\t/*downloadsToPlaylist().then(playList => {\n\t\t\t\t\tprops.appState({\n\t\t\t\t\t\turi: URL.createObjectURL(value.blob),\n\t\t\t\t\t\tthumbnail: URL.createObjectURL(value.thumbnail),\n\t\t\t\t\t\tvideo: data.videoElement,\n\t\t\t\t\t\tlist: playList,\n\t\t\t\t\t\tindex: index\n\t\t\t\t\t}, false);\n\t\t\t\t})\n\t\t\t\t */\n\t\t\t\tprops.appState({\n\t\t\t\t\turi: URL.createObjectURL(value.blob),\n\t\t\t\t\tthumbnail: URL.createObjectURL(value.thumbnail),\n\t\t\t\t\tvideo: data.videoElement,\n\t\t\t\t\tlist: {items: [data.videoElement]},\n\t\t\t\t\tindex: index\n\t\t\t\t}, false);\n\t\t\t}\n\t\t});\n\t}\n\n\tasync function deleteDownload(data) {\n\t\tconst config = {\n\t\t\ttitle: (\n\t\t\t\t<div className={\"k-dialog-body-title text-truncate\"}>Delete From Downloads</div>) || \"Nothing Here!\",\n\t\t\tmessage: (<div className={\"k-dialog-body-inner\"}>\n\t\t\t\t<div className={\"d-flex justify-content-center mb-3\"}>\n\t\t\t\t\t<Avatar src={data.thumbnail} alt={\"Song Thumbnail\"}/>\n\t\t\t\t</div>\n\t\t\t\tDo You want to delete {data.title} from downloads?\n\t\t\t\t<br/>\n\t\t\t</div>) || \"Nothing Here!\",\n\t\t};\n\t\tdialog.confirm(config)\n\t\t\t.then(() => {\n\t\t\t\tdeleteDownloadedSong(data.id).then(() => {\n\t\t\t\t\tcreateList();\n\t\t\t\t\t// enqueueSnackbar('Deleted From Downloads');\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((e) => e);\n\t}\n\n\tfunction createList() {\n\t\tgetAllDownloadedSongs().then(value => {\n\t\t\tsetHistoryItems(() => {\n\t\t\t\tconst listItems = value.map((v, i) => {\n\t\t\t\t\tconst thumbnail = URL.createObjectURL(v.thumbnail);\n\t\t\t\t\t// const songURL = URL.createObjectURL(v.blob);\n\t\t\t\t\treturn <DownloadListItem onMouseLeave={\n\t\t\t\t\t\t() => deleteDownload({id: v.id, thumbnail: thumbnail, title: v.title})\n\t\t\t\t\t} onClick={() => PlaySong(v, i)} className={\"text-truncate\"} key={i} title={v.title}\n\t\t\t\t\t\t\t\t\t\t\t channelTitle={v.channelTitle}\n\t\t\t\t\t\t\t\t\t\t\t thumbnail={thumbnail} tags={v.tags}/>;\n\t\t\t\t});\n\t\t\t\tconst listItemsWithDividers = [];\n\t\t\t\tlistItems.forEach((item, index) => {\n\t\t\t\t\tlistItemsWithDividers.push(item);\n\t\t\t\t\tif (listItems[index + 1] !== undefined) {\n\t\t\t\t\t\tlistItemsWithDividers.push(<Divider key={Math.random()} variant=\"inset\" component=\"li\"/>);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn listItemsWithDividers;\n\t\t\t});\n\t\t});\n\t}\n\n\tuseEffect(() => {\n\t\tcreateList();\n\t\treturn () => {\n\t\t\tabortController.abort();\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<div className={\"KabeersDownloadContainer mb-5\"} color={\"primary.dark\"}>\n\t\t\t<Container fixed>\n\t\t\t\t<List className={`${classes.root} mt-5 bg-transparent`}>\n\t\t\t\t\t{HistoryItems}\n\t\t\t\t</List>\n\t\t\t</Container>\n\t\t</div>\n\t);\n};\n\nDownloads.propTypes = {\n\tappState: PropTypes.object\n};\n\nDownloads.defaultProps = {};\n\nexport default Downloads;\n"],"sourceRoot":""}